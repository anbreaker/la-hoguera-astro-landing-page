---
import Navbar from './Navbar.astro';
---

<header
  id="landing-header"
  class="py-3 flex items-center fixed top-0 w-full justify-between z-40 text-white"
>
  <Navbar />
</header>

<script>
  const header = document.querySelector('#landing-header') as HTMLElement;

  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.9,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const { isIntersecting } = entry;
      if (isIntersecting) {
        const color = entry.target.getAttribute('data-header-color');
        header.style.color = color;
      }
    });
  }, observerOptions);

  const sections = document.querySelectorAll('.landing-section');

  sections.forEach((section) => observer.observe(section));
</script>
